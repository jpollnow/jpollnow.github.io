<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link href="../css/cyoa.css" rel="stylesheet" type="text/css">
</head>

<body onClick="playAudio()">
	<div class = "video">
      <video id="vid" preload="auto" controls="controls" autoplay="autoplay" >
          <source src="../video/Mountain1.mp4" type="video/mp4">
      </video>
	</div>
	
	<p id="Pre_Text">You continue your walk through the forest.</p>
	
	<p id="Post_Text">As you come to the top of a hill a mountain reveals itself far in the distance. It's so huge it's hard to judge how far away it is.</p>
	
	<div class = "Buttons">
		<button id="LeftButton" onClick="ButtonOne()">Walk towards the mountain</button>
		<button id="RightButton" onClick="ButtonTwo()">Continue on</button>
	</div>
	
	<audio id="forest" autoplay="autoplay" loop="loop" >
		<source src="../sound/Sound4.mp3" type="audio/mp3">
	</audio>
	
	<script>
		
		document.getElementById('vid').addEventListener('ended',whenVideoEnds,false);
		
		var lake = 0;
		var LeftButton = document.getElementById("LeftButton");
		var RightButton = document.getElementById("RightButton"); 
		var Post_Text = document.getElementById("Post_Text");  
		var vid = document.getElementById("vid");
		var changeRightButton = document.getElementById("RightButton");
		var changeLeftButton = document.getElementById("LeftButton");
		var changePreText = document.getElementById("Pre_Text");
		var changePostText = document.getElementById("Post_Text");
		Post_Text.style.display = 'none';
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';
		
		var mountain1 = "../video/Mountain1.mp4";
		var mountain2 = "../video/Mountain2.mp4";
		var mountain3 = "../video/Mountain3.mp4";
		
		function whenVideoEnds(e) {
		// these three commands make the caption and the 2 buttons visible
        Post_Text.style.display = 'block';
		setTimeout(function (){
			LeftButton.style.display = 'inline-block';
			RightButton.style.display = 'inline-block';
		}, 3000);
    }
		
	function ButtonOne() {
    	lake ++;
		vid.currentTime = 0;
		Post_Text.style.display = 'none';    
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';  
		Pre_Text.style.display = 'none';
		vid.style.display = 'none';
		changeRightButton.innerHTML = "Turn back";
		changePreText.innerHTML = "You begin your uphil trek to the mountain.";
		changePostText.innerHTML = "After walking for a while your legs are getting sore, uphill walking is very tiring.";
		setTimeout(function (){
			Pre_Text.style.display = 'block';
			vid.style.display = 'block';
		}, 250);
		if (lake > 0){
			changeLeftButton.innerHTML = "Continue towards the mountain";
			vid.src = mountain2;
		}
		if (lake > 1){
			changePreText.innerHTML = "You continue towards the mountain.";
			vid.src = mountain3;
		}
		if (lake == 3){
			window.open ('sleep.html','_self',false)
		}
    }
		
	function ButtonTwo() {
		if (lake == 0){
			window.open ('rabbit.html','_self',false)
		}
		if (lake > 0){
			window.open ('mountain.html','_self',false)
			lake = 0;
			vid.src = mountain1;
		}
    }
		
	function playAudio() {
		var audio = document.getElementById('forest');
		audio.play();
		}
	</script>
</body>
</html>
