<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link href="../css/cyoa.css" rel="stylesheet" type="text/css">
</head>

<body onClick="playAudio()">
	<div class = "video">
      <video id="vid" preload="auto" controls="controls" autoplay="autoplay" >
          <source src="../video/Downhill1.mp4" type="video/mp4">
      </video>
	</div>
	
	<p id="Pre_Text">You take the path that leads downhill. Afterall, you're getting thirsty and lower elevation often means water.</p>
	
	<p id="Post_Text">As you walk you see the water you were hoping for, but not in the form you expected. In the distance you see a beautiful beach; white sand flashes in the sunlight before a rolling wave crashes over it. The beach looks so inviting, but it is far away...</p>
	
	<div class = "Buttons">
		<button id="LeftButton" onClick="ButtonOne()">Walk towards the beach</button>
		<button id="RightButton" onClick="ButtonTwo()">Continue on</button>
	</div>
	
	<audio id="forest" autoplay="autoplay" loop="loop" >
		<source src="../sound/Sound1.mp3" type="audio/mp3">
	</audio>
	
	<script>
		
		document.getElementById('vid').addEventListener('ended',whenVideoEnds,false);
		
		var lake = 0;
		var LeftButton = document.getElementById("LeftButton");
		var RightButton = document.getElementById("RightButton"); 
		var Post_Text = document.getElementById("Post_Text");  
		var vid = document.getElementById("vid");
		var changeRightButton = document.getElementById("RightButton");
		var changeLeftButton = document.getElementById("LeftButton");
		var changePreText = document.getElementById("Pre_Text");
		var changePostText = document.getElementById("Post_Text");
		Post_Text.style.display = 'none';
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';
		
		var downhill1 = "../video/Downhill1.mp4";
		var downhill2 = "../video/Downhill2.mp4";
		var downhill3 = "../video/Downhill3.mp4";
		
		function whenVideoEnds(e) {
        Post_Text.style.display = 'block';
		setTimeout(function (){
			LeftButton.style.display = 'inline-block';
			RightButton.style.display = 'inline-block';
		}, 3000);
    }
		
	function ButtonOne() {
    	lake ++;
		vid.currentTime = 0;
		Post_Text.style.display = 'none';    
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';  
		Pre_Text.style.display = 'none';
		vid.style.display = 'none';
		changeRightButton.innerHTML = "Turn back";
		changePreText.innerHTML = "You begin walking towards the beach.";
		changePostText.innerHTML = "After a while you're getting tired, and the beach still looks very far away, you being to doubt that you can make it there...";
		setTimeout(function (){
			Pre_Text.style.display = 'block';
			vid.style.display = 'block';
		}, 250);
		if (lake > 0){
			changeLeftButton.innerHTML = "Continue towards the beach";
			vid.src = downhill2;
		}
		if (lake > 1){
			changePreText.innerHTML = "You continue towards the beach.";
			vid.src = downhill3;
		}
		if (lake == 3){
			window.open ('sleep.html','_self',false)
		}
    }
		
	function ButtonTwo() {
		if (lake == 0){
			window.open ('bird.html','_self',false)
		}
		if (lake > 0){
			window.open ('downhill.html','_self',false)
			lake = 0;
			vid.src = downhill1;
		}
    }
		
	function playAudio() {
		var audio = document.getElementById('forest');
		audio.play();
		}
	</script>
</body>
</html>
