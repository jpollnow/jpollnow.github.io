<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link href="../css/cyoa.css" rel="stylesheet" type="text/css">
</head>

<body onClick="playAudio()">
	<div class = "video">
      <video id="vid" preload="auto" controls="controls" autoplay="autoplay" >
          <source src="../video/Paved1.mp4" type="video/mp4">
      </video>
	</div>
	
	<p id="Pre_Text">You choose the paved path. Any sign of civilization is a good thing, and the path is easier to walk.</p>
	
	<p id="Post_Text">As you walk your hopes come true, you see a sparkling city in the distance, it's small and far away, but it's something.</p>
	
	<div class = "Buttons">
		<button id="LeftButton" onClick="ButtonOne()">Walk towards the city</button>
		<button id="RightButton" onClick="ButtonTwo()">Continue on</button>
	</div>
	
	<audio id="forest" autoplay="autoplay" loop="loop" >
		<source src="../sound/Sound1.mp3" type="audio/mp3">
	</audio>
	
	<script>
		
		document.getElementById('vid').addEventListener('ended',whenVideoEnds,false);
		
		var lake = 0;
		var LeftButton = document.getElementById("LeftButton");
		var RightButton = document.getElementById("RightButton"); 
		var Post_Text = document.getElementById("Post_Text");  
		var vid = document.getElementById("vid");
		var changeRightButton = document.getElementById("RightButton");
		var changeLeftButton = document.getElementById("LeftButton");
		var changePreText = document.getElementById("Pre_Text");
		var changePostText = document.getElementById("Post_Text");
		Post_Text.style.display = 'none';
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';
		
		var paved1 = "../video/Paved1.mp4";
		var paved2 = "../video/Paved2.mp4";
		var paved3 = "../video/Paved3.mp4";
		
		function whenVideoEnds(e) {
		// these three commands make the caption and the 2 buttons visible
        Post_Text.style.display = 'block';
		setTimeout(function (){
			LeftButton.style.display = 'inline-block';
			RightButton.style.display = 'inline-block';
		}, 3000);
    }
		
	function ButtonOne() {
    	lake ++;
		vid.currentTime = 0;
		Post_Text.style.display = 'none';    
		LeftButton.style.display = 'none';
		RightButton.style.display = 'none';  
		Pre_Text.style.display = 'none';
		vid.style.display = 'none';
		changeRightButton.innerHTML = "Turn back";
		changePreText.innerHTML = "You start walking towards the city, the paved path makes it easier and the time flies by.";
		changePostText.innerHTML = "After a long walk you're beginning to get tired despite the easier path.";
		setTimeout(function (){
			Pre_Text.style.display = 'block';
			vid.style.display = 'block';
		}, 250);
		if (lake > 0){
			changeLeftButton.innerHTML = "Continue towards the city";
			vid.src = paved2;
		}
		if (lake > 1){
			changePreText.innerHTML = "You continue towards the city.";
			vid.src = paved3;
		}
		if (lake == 3){
			window.open ('sleep.html','_self',false)
		}
    }
		
	function ButtonTwo() {
		if (lake == 0){
			window.open ('rabbit.html','_self',false)
		}
		if (lake > 0){
			window.open ('paved.html','_self',false)
			lake = 0;
			vid.src = paved1;
		}
    }
		
	function playAudio() {
		var audio = document.getElementById('forest');
		audio.play();
		}
	</script>
</body>
</html>
